# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Content Versions

- **v55**: Migrate from `code-review-ai` to `comprehensive-review` plugin
  - `/do-review` now spawns architect-review + code-reviewer by default (2 agents in parallel)
  - New `--security` / `--full` flags to include security-auditor (3 agents)
  - Automatic migration for existing users on `--update`
- **v54**: Custom command overrides, extends & script deployment ([Guide](https://b33eep.github.io/claude-code-setup/guides/customizing))
  - Custom repos can now ship commands that override or extend base commands (e.g., `/catchup` with team-specific steps)
  - Custom repos can ship helper scripts that commands and skills reference
  - `--list` and `/claude-code-setup` show which commands are customized
- **v53**: Rewrite `/claude-code-setup` to 3-phase flow ([Record 040](docs/records/040-setup-command-ux.md))
  - Discovery script (`lib/setup-status.sh`) replaces 8-12 Bash calls with single JSON output
  - New flags: `--remove-skill` and `--remove-mcp` for non-interactive module removal
  - Any scenario completes in 2 permission prompts (down from ~12-18)
- **v52**: Generalize `/delegate` to support any task type
  - Documentation clarified: works for coding, research, analysis, information gathering, documentation
  - Examples updated to include non-development tasks (sports analysis, competitor pricing, academic research)
- **v51**: `/claude-code-setup` offers Agent Teams configuration
  - Agent Teams status check and enable option added to `/claude-code-setup` command
  - Fixes: `/claude-code-setup` used `install.sh --update --yes` which silently skipped Agent Teams
  - Fixes: unsafe `> tmp` temp file pattern in jq operations replaced with explicit paths
- **v50**: Direct module installation + tracking reconciliation
  - New CLI options: `--add-skill <name>` and `--add-mcp <name>` for non-interactive installation
  - New `reconcile_tracking()` function syncs `installed.json` with filesystem during `--update`
  - Fixes tracking for modules installed before tracking existed or installed manually
  - Enables `/claude-code-setup` skill to install modules reliably without interactive menus
- **v49**: User Stories skill ([Record 039](docs/records/039-user-stories-skill.md))
  - New skill: `user-stories` — INVEST criteria, Given-When-Then acceptance criteria, story splitting, antipatterns
  - `/design` Step 4 loads skill automatically if installed
  - Source: adapted from [agile-product-owner](https://github.com/alirezarezvani/claude-skills/tree/main/product-team/agile-product-owner) by alirezarezvani (MIT)
- **v48**: Improve project CLAUDE.md template & workflow
  - Template: add `## Architecture` section for high-level patterns and data flow
  - `/wrapup` now checks Development, Files, Architecture sections for needed updates
  - `/wrapup` now archives Done items from Current Status and prunes stale Recent Decisions
  - Recent Decisions guidelines: new 4th criterion — project-level scope, not implementation details
  - Template: remove unused Tests column from Status table
  - Template: expand Project Instructions examples (constraints, areas to avoid)
- **v47**: Agent Teams commands + /do-review ([Record 038](docs/records/038-pair-programming-with-agent-teams.md))
  - New command: `/with-advisor "task"` — expert pair programming via Agent Teams
  - New command: `/delegate "task"` — independent parallel work via Agent Teams
  - New command: `/do-review` — triggers `code-review-ai:architect-review` on code changes (uncommitted, commit range, or branch diff)
  - Smart advisor selection, /catchup onboarding, progress updates
  - Delegate: git worktree isolation, concurrent delegates, write/read-only task classification
  - Install wizard: Agent Teams toggle
  - Development Flow diagram updated to reference `/do-review`
  - Documentation pages for all three commands
- **v46**: Project Template v2 ([Record 037](docs/records/037-project-template-v2.md))
  - Remove Records table from project template — records on disk are the source of truth
  - Add `## Project Instructions` with `<!-- PROJECT INSTRUCTIONS START/END -->` markers (preserved during `/wrapup` and migrations)
  - Add `## Files` section for project structure overview
  - Re-parent `### Future` from under `## Records` to under `## Current Status`
  - New migration command (`commands/migrate-project-template.md`) triggered by `/catchup` on version mismatch
  - Update `/wrapup` to remove Records sync step, add Project Instructions preservation rule
  - Update global template: Records docs, After User Corrections routing with Project Instructions
- **v45**: Fix `/catchup` template version check — explicit Read tool instruction to prevent `~` path expansion issues
- **v44**: Fix template versioning ([Record 036](docs/records/036-project-template-versioning.md))
  - Remove `## User Stories` placeholder from project template (belongs in Records via `/design`)
  - Fix `/catchup` to always set version marker even when user declines adding missing sections
- **v43**: Project template versioning — `/catchup` detects outdated project CLAUDE.md and offers to add missing sections ([Record 036](docs/records/036-project-template-versioning.md))
- **v42**: Dynamic CLAUDE.md table generation ([Record 035](docs/records/035-dynamic-claude-md-tables.md))
  - MCP Servers, Skills, and Skill Loading tables now generated from `installed.json`
  - Removed modules disappear from CLAUDE.md immediately
  - Custom modules appear in tables automatically
  - Added `file_extensions` frontmatter field to all context skills
  - Added `replace_marker_section()` for reusable marker-based content replacement
  - Fixed missing `type: command` in `create-slidev-presentation` frontmatter
- **v41**: Add correction persistence trigger and re-plan signs to workflow ([Record 034](docs/records/034-workflow-improvements.md))
  - Correction trigger: routes user corrections to appropriate persistence layer (Recent Decisions, User Instructions, or Private Note)
  - Re-plan signs: concrete signals for when to stop and reassess approach (third workaround, invalidated assumption, scope creep)
- **v40**: Add `standards-gradle` skill for Gradle 9 Kotlin DSL ([Record 033](docs/records/033-gradle-standards-skill.md))
  - Comprehensive Gradle build tool guidance (~4,344 lines)
  - Section 1: Project Configuration (build scripts, dependencies, plugins, multi-module, Gradle 9 features, **Gradle Build Phases**)
  - Section 2: Plugin/Task Development (custom tasks, extensions, providers API, caching, custom plugins)
  - Groovy → Kotlin DSL Migration Guide (syntax differences, conversion patterns, 12 common gotchas)
- **v38**: Add `standards-kotlin` skill for modern Kotlin applications ([Record 032](docs/records/032-kotlin-standards-skill.md))
  - Core Kotlin standards: naming, coroutines, flows, null safety
  - Modern Kotlin 2.3.0 (LTS) features: K2 compiler, data classes, sealed classes
  - Kotlin 2.0+ features: inline value classes, smart casts
  - Kotlin 2.2+ features: context receivers (experimental)
  - Kotlin 2.3 features: explicit backing fields, UUID API (experimental)
  - Coroutines & structured concurrency patterns
  - Flow API: StateFlow, SharedFlow, operators, best practices
  - Testing with JUnit 5, kotlin.test, Mockk, coroutines testing
  - Build tools: Gradle Kotlin DSL (recommended), Maven
  - Recommended tooling: ktlint, detekt, kotlinx-serialization
  - Future extensions planned: standards-android, standards-spring-kotlin, standards-ktor, standards-kmp
- **v37**: Add `standards-java` skill for Java enterprise applications ([Record 031](docs/records/031-java-developer-skill.md))
  - Core Java standards: naming, modern features, code organization
  - Java 17 features: records, sealed classes, pattern matching, text blocks, switch expressions
  - Java 21 features: virtual threads, sequenced collections, record patterns, pattern matching for switch
  - Java 25 features: flexible main methods, scoped values, gatherers, primitive pattern matching (preview)
  - Recommends latest LTS (Java 21/25) for new projects
  - Testing fundamentals: JUnit 5, Mockito
  - Build tool awareness: Maven and Gradle
  - Production best practices and recommended tooling
  - Future extensions planned: standards-spring, standards-jakartaee, standards-quarkus

### Security

- Remove `eval` from deps.json dependency check ([PR #22](https://github.com/b33eep/claude-code-setup/pull/22))
  - Use `command -v $name` directly instead of eval'ing arbitrary check commands
  - Document trust model in SECURITY.md
  - Add `SKIP_SKILL_DEPS` env var for test isolation

### Content Versions

- **v36**: Fix custom repo update notification to use VERSION instead of git hash
  - Custom repo now compared via VERSION file (like base repo)
  - Prevents false notifications on refactoring commits without version bump
- **v35**: Add `/design` command for structured feature design ([Record 030](docs/records/030-design-command.md))
  - 5-step workflow: Problem → Options → Solution → Stories → Finalize
  - Creates Record immediately, updates incrementally
  - Supports `--continue` for resuming and `--review` for feedback
- **v34**: Fix update notification hook to show message to user
  - Use `systemMessage` JSON output format for user-visible notifications
- **v33**: Add update notification hook ([Record 028](docs/records/028-update-notifications.md))
  - SessionStart hook checks for available updates at session start
  - Compares installed version with latest on GitHub
  - Checks custom repo for new commits via `git ls-remote`
  - Fail-silent on network errors, fast (~100-200ms)
- **v32**: Add restart warning after upgrade/changes
  - Tools (Read, Bash, etc.) may not work until Claude Code restart
  - Warning shown after `/claude-code-setup` upgrades, module installs, and removals
- **v31**: Add `--remove` flag to uninstall modules ([Record 027](docs/records/027-uninstall-modules.md))
  - Remove MCP servers, skills, and external plugins
  - Interactive toggle selection (same UX as installation)
  - Added to `/claude-code-setup` command options
- **v30**: `/claude-code-setup` inserts MCP config with placeholder instead of showing snippet
  - Config is added directly to `~/.claude.json` with `YOUR_API_KEY_HERE`
  - User only needs to replace one value, no copy/paste required
- **v29**: `/claude-code-setup` supports external plugins installation
  - Discovers available plugins from `external-plugins.json`
  - Adds marketplace via `claude plugin marketplace add` if needed
  - Installs plugins via `claude plugin install`
  - Shows restart hint after installation
- **v28**: `/claude-code-setup` shows manual config hint when MCP/module requires API key
  - Stdin consumed by menus prevents interactive API key prompts
  - Claude now shows exact config with placeholder for user to add key manually
- **v27**: Add `code-review-ai` plugin from claude-code-workflows
  - AI-powered architectural review and code quality analysis
- **v26**: Add External Plugins feature - install Claude plugins via installer ([Record 026](docs/records/026-external-plugins.md))
  - Uses official `claude plugin` CLI
  - Offers `document-skills` (Excel, Word, PowerPoint, PDF) from Anthropic
  - Custom plugins via `~/.claude/custom/external-plugins.json`
- **v25**: `/init-project` now creates `docs/notes/` folder and adds it to `.gitignore`
  - Completes Private Notes feature from v24
- **v24**: Add Private Notes feature - `docs/notes/*.open.md` loaded by `/catchup` ([Record 025](docs/records/025-private-notes.md))
  - Gitignored notes for sessions, research, TODOs
  - `.open.md` suffix marks active notes
  - Rename to `.md` to close
- **v23**: Add Decision Log feature - "Recent Decisions" section in project CLAUDE.md ([Record 023](docs/records/023-context-quality-improvements.md))
  - Small decisions with reasoning survive `/clear`
  - Added immediately when decision is made (not at /wrapup)
  - Max 20 entries, pruned by relevance
- **v22**: Add `/youtube-transcript` skill - download transcripts with automatic frame extraction ([Record 021](docs/records/021-youtube-transcript-skill.md))
- **v21**: Remove auto-permissions feature (may discourage new users) - reverts v19 ([Record 019](docs/records/019-upgrade-permissions.md))
- **v20**: Remove `/upgrade-custom` command (replaced by `/claude-code-setup`), add custom modules versioning ([Record 020](docs/records/020-custom-modules-versioning.md))
- **v19**: ~~Auto-configure permission allow rules~~ (rejected in v21)
- **v18**: Add `/todo` command, `/catchup` loads relevant Records, `/wrapup` syncs Records table ([Record 018](docs/records/018-todo-command.md))
- **v17**: `/catchup` reads project README.md first for context
- **v16**: Rename `/clear-session` to `/wrapup` for consistency with `/catchup`
- **v15**: Preserve user instructions in global CLAUDE.md during updates (section markers)
- **v14**: Strengthen "No Co-Authored-By" rule to override Claude Code default behavior
- **v13**: Add Linux support (Ubuntu/Debian, Arch, Fedora, openSUSE) and refactor install.sh into lib/ modules
- **v12**: Fix changelog format in `/claude-code-setup` output example
- **v11**: Clarify code-review-ai plugin is optional in global prompt
- **v10**: Rename `/upgrade-claude-setup` → `/claude-code-setup`, show delta, ask user before actions
- **v9**: Add `/skill-creator` command skill for creating custom skills
- **v8**: Add JavaScript/Node.js coding standards skill (standards-javascript)
- **v7**: Add `--yes`/`-y` flag to install.sh for non-interactive updates
- **v6**: Rename ADR to Records - broader scope for design docs, feature specs, implementation plans
- **v5**: Installation & upgrade improvements
  - Add `quick-install.sh` for curl one-liner installation
  - Add `/claude-code-setup` command for in-session updates
  - Add `/add-custom` and `/upgrade-custom` commands
  - Separate project template to `templates/project-CLAUDE.md`
- **v4**: Add MCP web search preference (google-search/brave-search over built-in WebSearch)
- **v3**: Improved skill auto-loading (session-start, task-based, review-agent)
- **v2**: Add Shell/Bash coding standards skill (standards-shell)
- **v1**: Initial managed content (global prompt, commands, skills, MCP configs)

[Unreleased]: https://github.com/b33eep/claude-code-setup/compare/main...HEAD
